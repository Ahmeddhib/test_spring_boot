Skip to content
Jenkins

    webhootest

#45

    Sortie de la console

Administrer Jenkins
ahmed dhib
Status
Changes
Console Output
Edit Build Information
Log de scrutation
Timings
Git Build Data
Pipeline Overview
Thread Dump
Pause/resume
Replay
Pipeline Steps
Workspaces
Previous Build
En coursSucc√®s
Sortie de la console
Download
Voir en texte brut

Started by GitHub push by Ahmeddhib
Lightweight checkout support not available, falling back to full checkout.
Checking out git https://github.com/Ahmeddhib/StudentsManagement-DevOps.git into /var/lib/jenkins/workspace/webhootest@script/abc04ede375ecb15ceabc64bbe1ecb511190b2e163171f8cd4e8ce8b1f118bcb to read Jenkinsfile
The recommended git tool is: NONE
using credential ahmeddhib
 > git rev-parse --resolve-git-dir /var/lib/jenkins/workspace/webhootest@script/abc04ede375ecb15ceabc64bbe1ecb511190b2e163171f8cd4e8ce8b1f118bcb/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/Ahmeddhib/StudentsManagement-DevOps.git # timeout=10
Fetching upstream changes from https://github.com/Ahmeddhib/StudentsManagement-DevOps.git
 > git --version # timeout=10
 > git --version # 'git version 2.25.1'
using GIT_ASKPASS to set credentials 
 > git fetch --tags --force --progress -- https://github.com/Ahmeddhib/StudentsManagement-DevOps.git +refs/heads/*:refs/remotes/origin/* # timeout=10
Seen branch in repository origin/main
Seen 1 remote branch
 > git show-ref --tags -d # timeout=10
Checking out Revision ebeb88c0674361c012bde5c0cf194c807d663339 (origin/main)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f ebeb88c0674361c012bde5c0cf194c807d663339 # timeout=10
Commit message: "add file"
 > git rev-list --no-walk 917413fa7a17c8a0e27494a355807b31fc3c2952 # timeout=10
[Pipeline] Start of Pipeline
[Pipeline] node
Running on Jenkins in /var/lib/jenkins/workspace/webhootest
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
The recommended git tool is: NONE
using credential ahmeddhib
 > git rev-parse --resolve-git-dir /var/lib/jenkins/workspace/webhootest/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/Ahmeddhib/StudentsManagement-DevOps.git # timeout=10
Fetching upstream changes from https://github.com/Ahmeddhib/StudentsManagement-DevOps.git
 > git --version # timeout=10
 > git --version # 'git version 2.25.1'
using GIT_ASKPASS to set credentials 
 > git fetch --tags --force --progress -- https://github.com/Ahmeddhib/StudentsManagement-DevOps.git +refs/heads/*:refs/remotes/origin/* # timeout=10
Seen branch in repository origin/main
Seen 1 remote branch
 > git show-ref --tags -d # timeout=10
Checking out Revision ebeb88c0674361c012bde5c0cf194c807d663339 (origin/main)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f ebeb88c0674361c012bde5c0cf194c807d663339 # timeout=10
Commit message: "add file"
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] withEnv
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Checkout)
[Pipeline] checkout
The recommended git tool is: NONE
No credentials specified
 > git rev-parse --resolve-git-dir /var/lib/jenkins/workspace/webhootest/.git # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/Ahmeddhib/StudentsManagement-DevOps.git # timeout=10
Using shallow fetch with depth 1
Fetching upstream changes from https://github.com/Ahmeddhib/StudentsManagement-DevOps.git
 > git --version # timeout=10
 > git --version # 'git version 2.25.1'
 > git fetch --tags --force --progress --depth=1 -- https://github.com/Ahmeddhib/StudentsManagement-DevOps.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/main^{commit} # timeout=10
Checking out Revision ebeb88c0674361c012bde5c0cf194c807d663339 (refs/remotes/origin/main)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f ebeb88c0674361c012bde5c0cf194c807d663339 # timeout=10
Commit message: "add file"
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Check for Code Changes)
[Pipeline] script
[Pipeline] {
[Pipeline] sh
+ find . -type f -name *.java -o -name *.xml -o -name *.properties -o -name *.yml -o -name *.yaml -o -name Dockerfile -o -name pom.xml -o -name Jenkinsfile
+ sort
+ xargs cat
+ awk {print $1}
+ sha256sum
+ cat current_code_hash.txt
+ echo Hash calcul√© : 0c1bf8d24b41577fe4b31df32f331baea440902dd0d9b5daf3c90605b373ae20
Hash calcul√© : 0c1bf8d24b41577fe4b31df32f331baea440902dd0d9b5daf3c90605b373ae20
[Pipeline] readFile
[Pipeline] readFile
[Pipeline] echo
Hash pr√©c√©dent trouv√© : 0c1bf8d24b41577fe4b31df32f331baea440902dd0d9b5daf3c90605b373ae20
[Pipeline] echo
‚úÖ Aucun changement dans le code
[Pipeline] writeFile
[Pipeline] echo
Build n√©cessaire ? false
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build Maven Project)
Stage "Build Maven Project" skipped due to when conditional
[Pipeline] getContext
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Build Docker Image)
Stage "Build Docker Image" skipped due to when conditional
[Pipeline] getContext
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Push Docker Image)
[Pipeline] script
[Pipeline] {
[Pipeline] withCredentials
Masking supported pattern matches of $DOCKER_PASS
[Pipeline] {
[Pipeline] sh
+ echo Authentification sur Docker Hub...
Authentification sur Docker Hub...
+ echo ****
+ docker login -u ahmedwolf --password-stdin

WARNING! Your credentials are stored unencrypted in '/var/lib/jenkins/.docker/config.json'.
Configure a credential helper to remove this warning. See
https://docs.docker.com/go/credential-store/

Login Succeeded
+ echo Images disponibles localement :
Images disponibles localement :
+ docker images
+ grep ahmedwolf/spring-test3
ahmedwolf/spring-test3        build-39   df852c48e4c4   11 days ago    356MB
ahmedwolf/spring-test3        build-43   df852c48e4c4   11 days ago    356MB
ahmedwolf/spring-test3        latest     df852c48e4c4   11 days ago    356MB
+ docker inspect ahmedwolf/spring-test3:build-45
+ echo ‚ö†Ô∏è Image ahmedwolf/spring-test3:build-45 non trouv√©e localement
‚ö†Ô∏è Image ahmedwolf/spring-test3:build-45 non trouv√©e localement
+ echo ‚Üí Skip du push pour ce tag
‚Üí Skip du push pour ce tag
+ [ false = true ]
+ echo Skip push latest (aucun changement d√©tect√©)
Skip push latest (aucun changement d√©tect√©)
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Deploy to Kubernetes)
[Pipeline] script
[Pipeline] {
[Pipeline] sh
+ echo üîÑ D√©ploiement sur Kubernetes...
üîÑ D√©ploiement sur Kubernetes...
+ docker inspect ahmedwolf/spring-test3:build-45
+ docker inspect ahmedwolf/spring-test3:latest
+ echo Utilisation de l'image latest locale: ahmedwolf/spring-test3:latest
Utilisation de l'image latest locale: ahmedwolf/spring-test3:latest
+ IMAGE_TO_DEPLOY=ahmedwolf/spring-test3:latest
+ echo Image √† d√©ployer: ahmedwolf/spring-test3:latest
Image √† d√©ployer: ahmedwolf/spring-test3:latest
+ kubectl get deployment spring-test3
+ echo Mise √† jour du d√©ploiement existant...
Mise √† jour du d√©ploiement existant...
+ kubectl set image deployment/spring-test3 spring-test3=ahmedwolf/spring-test3:latest --record
Flag --record has been deprecated, --record will be removed in the future
+ kubectl rollout status deployment/spring-test3 --timeout=300s
deployment "spring-test3" successfully rolled out
+ echo ‚úÖ D√©ploiement Kubernetes termin√©
‚úÖ D√©ploiement Kubernetes termin√©
+ echo --- Informations du d√©ploiement ---
--- Informations du d√©ploiement ---
+ kubectl get deployment spring-test3 -o wide
NAME           READY   UP-TO-DATE   AVAILABLE   AGE     CONTAINERS     IMAGES                          SELECTOR
spring-test3   1/1     1            1           3m58s   spring-test3   ahmedwolf/spring-test3:latest   app=spring-test3
[Pipeline] }
[Pipeline] // script
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Declarative: Post Actions)
[Pipeline] echo
üßπ Nettoyage...
[Pipeline] sh
+ docker logout
Removing login credentials for https://index.docker.io/v1/
[Pipeline] echo
üìä R√©sum√© du build:
[Pipeline] echo
Build #45
[Pipeline] echo
Image: ahmedwolf/spring-test3:build-45
[Pipeline] echo
Build n√©cessaire: false
[Pipeline] archiveArtifacts
Archiving artifacts
Enregistrement des empreintes num√©riques
[Pipeline] echo
‚úÖ Pipeline termin√©e avec succ√®s !
[Pipeline] echo
üì¶ Image Docker: ahmedwolf/spring-test3:build-45
[Pipeline] echo
üöÄ D√©ploy√© sur Kubernetes
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS

REST API
